
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../modules/qualityControl/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.14">
    
    
      
        <title>Global Pipeline Configuration Settings - Meta-Omics-Toolkit</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.10ba22f1.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#global-parameter-settings" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Meta-Omics-Toolkit" class="md-header__button md-logo" aria-label="Meta-Omics-Toolkit" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Meta-Omics-Toolkit
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Global Pipeline Configuration Settings
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Meta-Omics-Toolkit" class="md-nav__button md-logo" aria-label="Meta-Omics-Toolkit" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Meta-Omics-Toolkit
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Global Pipeline Configuration Settings
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Global Pipeline Configuration Settings
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#s3-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      S3 Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-of-input-parameters-of-the-full-pipeline-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration of input parameters of the full pipeline mode
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration of input parameters of the full pipeline mode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paired-end-input" class="md-nav__link">
    <span class="md-ellipsis">
      Paired End Input
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nanopore-input" class="md-nav__link">
    <span class="md-ellipsis">
      Nanopore Input
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generic-sra" class="md-nav__link">
    <span class="md-ellipsis">
      Generic SRA
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ncbi-sra" class="md-nav__link">
    <span class="md-ellipsis">
      NCBI SRA
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#database-input-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Database input configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Database input configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#extracted-database-path" class="md-nav__link">
    <span class="md-ellipsis">
      Extracted Database Path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#https-download" class="md-nav__link">
    <span class="md-ellipsis">
      HTTPS Download
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-file-path" class="md-nav__link">
    <span class="md-ellipsis">
      Local File Path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#s3-download" class="md-nav__link">
    <span class="md-ellipsis">
      S3 Download
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-database-md5sums" class="md-nav__link">
    <span class="md-ellipsis">
      Updating Database MD5SUMs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database-download-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Database Download strategy
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optional-configuration-of-computational-resources-used-for-pipeline-runs" class="md-nav__link">
    <span class="md-ellipsis">
      Optional configuration of computational resources used for pipeline runs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fragment-recruitment-for-unmapped-reads-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Fragment Recruitment for unmapped reads Configuration
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Modules
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modules/qualityControl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quality Control
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modules/annotation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Annotation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modules/assembly/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Assembly
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modules/cooccurrence/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cooccurrence
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modules/dereplication/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dereplication
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modules/fragment_recruitment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Run Fragment Recruitment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modules/magAttributes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MagAttributes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modules/plasmids/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plasmids
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modules/metabolomics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Metabolomics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modules/readMapping/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Read Mapping
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Developer
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Developer
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer_guidelines/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guidelines
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pipeline_specification/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pipeline Specification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../module_specification/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Module Specification
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#s3-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      S3 Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-of-input-parameters-of-the-full-pipeline-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration of input parameters of the full pipeline mode
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration of input parameters of the full pipeline mode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paired-end-input" class="md-nav__link">
    <span class="md-ellipsis">
      Paired End Input
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nanopore-input" class="md-nav__link">
    <span class="md-ellipsis">
      Nanopore Input
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generic-sra" class="md-nav__link">
    <span class="md-ellipsis">
      Generic SRA
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ncbi-sra" class="md-nav__link">
    <span class="md-ellipsis">
      NCBI SRA
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#database-input-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Database input configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Database input configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#extracted-database-path" class="md-nav__link">
    <span class="md-ellipsis">
      Extracted Database Path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#https-download" class="md-nav__link">
    <span class="md-ellipsis">
      HTTPS Download
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-file-path" class="md-nav__link">
    <span class="md-ellipsis">
      Local File Path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#s3-download" class="md-nav__link">
    <span class="md-ellipsis">
      S3 Download
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-database-md5sums" class="md-nav__link">
    <span class="md-ellipsis">
      Updating Database MD5SUMs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database-download-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Database Download strategy
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optional-configuration-of-computational-resources-used-for-pipeline-runs" class="md-nav__link">
    <span class="md-ellipsis">
      Optional configuration of computational resources used for pipeline runs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fragment-recruitment-for-unmapped-reads-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Fragment Recruitment for unmapped reads Configuration
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="global-parameter-settings">Global parameter settings</h1>
<ul>
<li>
<p><code>tempdir</code>: Temporary directory for storing files that are used to collect intermediate files.</p>
</li>
<li>
<p><code>summary</code>: If true a summary folder is created storing results of all samples combined.</p>
</li>
<li>
<p><code>output</code>: Output directory for storing pipeline results. If an S3 bucket is specified with the corresponding S3 credentials (See S3 configuration section) then
   the output is written to S3.</p>
</li>
<li>
<p><code>runid</code>: The run ID will be part of the output path and allows to distinguish between different pipeline configurations that were used for the same dataset.</p>
</li>
<li>
<p><code>logDir</code>: A path to a directory which is used to store log files.</p>
</li>
<li>
<p><code>scratch</code>: The scratch value can be either <code>false</code> or a path on a worker node. If a path is set, then the nextflow process in <code>slurm</code> mode is executed on the provided path.
    If the standard mode is used, then the parameter is ignored.</p>
</li>
<li>
<p><code>steps</code>: Steps allows to specify multiple pipeline modules for running the toolkit. We distinguish between two modes. You can either run one tool of
   the pipeline or the whole pipeline with different configurations.</p>
</li>
<li>
<p><code>databases</code>: This parameter specifies a place where files are downloaded to. If the <code>slurm</code> profile is used and databases should be downloaded, the path <strong>should</strong> point to a folder 
    which is not shared between the worker nodes (to reduce I/O on the shared folder resulting in a better performance). If this parameter is provided, the toolkit will create the specified
    directory. If all your databases have already been extracted beforehand, you can simply omit this parameter.</p>
</li>
<li>
<p><code>publishDirMode</code>: (optional) Per default results are symlinked to the chosen <code>output</code> directory. This default mode can be changed with this parameter.
    A useful mode is "copy", to copy results instead of just linking them. Other modes to choose from <a href="https://www.nextflow.io/docs/latest/process.html#publishdir">here</a>.  </p>
</li>
<li>
<p><code>skipVersionCheck</code>: The toolkit is regurarly tested against a set of Nextflow versions. Setting the <code>--skipVersionCheck</code> allows you to use the toolkit with Nextflow versions
   that were not tested.</p>
</li>
<li>
<p><code>s3SignIn</code>: If your input data (not the databases) is not publicly accessible via S3, then you will have to set the <code>s3SignIn</code> parameter to <code>true</code>.</p>
</li>
</ul>
<h2 id="s3-configuration">S3 Configuration</h2>
<p>All module inputs and outputs can be used in conjunction with S3.
If you want to set a custom S3 configuration setting (i.e. custom S3 endpoint), you will have to modify the aws client parameters 
with " -c ".</p>
<p>Example:
<div class="highlight"><pre><span></span><code>aws {
    client {
      s_3_path_style_access = true
      maxParallelTransfers = 28 
      maxErrorRetry = 10
      protocol = &#39;HTTPS&#39;
      endpoint = &#39;https://openstack.cebitec.uni-bielefeld.de:8080&#39;
      signerOverride = &#39;AWSS3V4SignerType&#39;
    }
}
</code></pre></div></p>
<p>In addition you will have to set a Nextflow Secret with the following keys:</p>
<div class="highlight"><pre><span></span><code>nextflow secrets set S3_ACCESS xxxxxxxxx
nextflow secrets set S3_SECRET xxxxxxxxx
</code></pre></div>
<p><code>S3_ACCESS</code> corresponds to the aws S3 access key id and <code>S3_SECRET</code> is the aws S3 secret key.
If your input data (not the databases) is publicly available then you have to set <code>s3SignIn:</code> to <code>false</code> in your config file.
Please note that for using databases you have to provide an additional aws credentials file (see database section). </p>
<h2 id="configuration-of-input-parameters-of-the-full-pipeline-mode">Configuration of input parameters of the full pipeline mode</h2>
<h3 id="paired-end-input">Paired End Input</h3>
<p>The input should be a path to a tsv file containing a sample id, as well as a path to the left and right read.</p>
<p>Example:
<div class="highlight"><pre><span></span><code>input:
  paired:
    path: &quot;test_data/fullPipeline/reads_split.tsv&quot;
</code></pre></div></p>
<h3 id="nanopore-input">Nanopore Input</h3>
<p>For Nanopore data a seperate input file should be specified.</p>
<div class="highlight"><pre><span></span><code>input:
  ont:
    path: &quot;test_data/fullPipeline/ont.tsv&quot;
</code></pre></div>
<h3 id="generic-sra">Generic SRA</h3>
<p>The toolkit is able to fetch fastq files based on SRA run accession ids from the NCBI or from a mirror based on S3:</p>
<div class="highlight"><pre><span></span><code>input:
  SRA:
    pattern:
      ont: &quot;.+[^(_1|_2)].+$&quot;
      illumina: &quot;.+(_1|_2).+$&quot;
    S3:
      path: test_data/SRA/samples.tsv 
      bucket: &quot;s3://ftp.era.ebi.ac.uk&quot; 
      prefix: &quot;/vol1/fastq/&quot;
      watch: false
      patternONT: &quot;.+[^(_1|_2)].+$&quot;
      patternIllumina: &quot;.+(_1|_2).+$&quot;
</code></pre></div>
<p>where:
  * <code>path</code> is the path to a file containing a column with <code>ACCESSION</code> as header. The <code>ACCESSION</code> column contains either SRA run or study accessions.</p>
<ul>
<li>
<p><code>bucket</code> is the S3 Bucket hosting the data.</p>
</li>
<li>
<p><code>prefix</code> is the path to the actual SRA datasets.</p>
</li>
<li>
<p><code>watch</code> if true, the file specified with the <code>path</code> attribute is watched and every time a new SRA run id is
     appended, the pipeline is triggered. The pipeline will never finish in this mode. Please note that watch currently only works
     if only one input type is specified (e.g "ont" or "paired" ...)</p>
</li>
<li>
<p><code>patternONT</code> and <code>patternIllumina</code> are patterns that are applied on the specified mirror in order to select the correct input files.</p>
</li>
</ul>
<h3 id="ncbi-sra">NCBI SRA</h3>
<p>With the following mode SRA datasets can directly be fetched from SRA.</p>
<div class="highlight"><pre><span></span><code>input:
  SRA:
    pattern:
      ont: &quot;.+[^(_1|_2)].+$&quot;
      illumina: &quot;.+(_1|_2).+$&quot;
    NCBI:
      path: test_data/SRA/samples.tsv
</code></pre></div>
<h2 id="database-input-configuration">Database input configuration</h2>
<p>Whenever a database field can be specified as part of the tool configuration (such as in gtdb or checkm), you are able to provide different methods to
fetch the database. In all settings, please make sure that the file has the same ending (e.g. .zip, .tar.gz) as specified in the corresponding tool section.
In addition, as database names are used to name results with which they were created, said database names should contain the respective database number or date of creation.
With this every result can be linked to one exact database version to clarify results. 
Except for the <code>extractedDBPath</code> parameter, all other input types (https, s3,...) will download the database to the folder specified in the <code>database</code> parameter.</p>
<h3 id="extracted-database-path">Extracted Database Path</h3>
<p>If you have already downloaded and extracted the database, you can specify the path using the <code>extractedDBPath</code> parameter.
This setting is available in standard and slurm mode. In slurm mode the path can point to a db on the worker node.</p>
<p>Example:
<div class="highlight"><pre><span></span><code>database:
  extractedDBPath: /vol/spool/gtdb/release202
</code></pre></div></p>
<h3 id="https-download">HTTPS Download</h3>
<p>The toolkit is able to download and extract the database, as long as the file ending equals the one specified in the corresponding tool section (.zip, tar.gz, tar.zst)
This setting is available in standard and slurm mode. </p>
<p>Example:
<div class="highlight"><pre><span></span><code>database:
  download:
    source: &#39;https://openstack.cebitec.uni-bielefeld.de:8080/databases/gtdb.tar.gz&#39;
    md5sum: 77180f6a02769e7eec6b8c22d3614d2e 
</code></pre></div></p>
<h3 id="local-file-path">Local File Path</h3>
<p>This setting allows you to reuse an already downloaded database. </p>
<p>Example:
<div class="highlight"><pre><span></span><code>database:
  download:
    source: &#39;/vol/spool/gtdb.tar.gz&#39;
    md5sum: 77180f6a02769e7eec6b8c22d3614d2e 
</code></pre></div></p>
<h3 id="s3-download">S3 Download</h3>
<p>You can specify an S3 link and configure the S3 call via the <code>s5cmd.params parameter.
The</code>s5cmd.params` parameter allows you to set any setting available of the <a href="https://github.com/peak/s5cmd">s5cmd</a> commandline tool. 
If you need credentials to access your databases, you can set them via the Nextflow secrets mechanism. The correct key name for the access and secret key can be found in the corresponding database section.</p>
<p>In the following example the compressed file will be downloaded and extracted.</p>
<p>Example for publicly available compressed database:
<div class="highlight"><pre><span></span><code>database:
  download:
    source: &#39;s3://databases/gtdb.tar.gz&#39;
    md5sum: 77180f6a02769e7eec6b8c22d3614d2e 
    s5cmd:
      params: &#39;--retry-count 30 --no-sign-request --no-verify-ssl --endpoint-url https://openstack.cebitec.uni-bielefeld.de:8080&#39;
</code></pre></div></p>
<p>If your database is already extracted and available via S3, you can specify the S3 link using a wildcard as in the next example.</p>
<div class="highlight"><pre><span></span><code>database:
  download:
    source: &#39;s3://databases/gtdb/*&#39;
    md5sum: 77180f6a02769e7eec6b8c22d3614d2e 
    s5cmd:
      params: &#39;--retry-count 30 --no-verify-ssl --endpoint-url https://openstack.cebitec.uni-bielefeld.de:8080&#39;
</code></pre></div>
<h3 id="updating-database-md5sums">Updating Database MD5SUMs</h3>
<p>The md5sum is computed over all md5sums of all files of the extracted database.
If you need to update the md5sum because you updated your database you have to download the database 
and run the following command</p>
<div class="highlight"><pre><span></span><code>find /path/to/db -type f -exec md5sum {} \; | sort | cut -d &#39; &#39; -f 1 | md5sum | cut -d &#39; &#39; -f 1
</code></pre></div>
<h3 id="database-download-strategy">Database Download strategy</h3>
<p>The toolkit allows to download databases on multiple nodes and tries to synchronize the download process between
multiple jobs on a node. However not all possible combinations of profiles and download types are reasonable.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">PROFILE</th>
<th style="text-align: left;">Download to Shared  NFS</th>
<th style="text-align: left;">Download to worker scratch dir</th>
<th style="text-align: left;">Reuse extracted directory</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">STANDARD</td>
<td style="text-align: left;">:material-check:</td>
<td style="text-align: left;">:material-close:</td>
<td style="text-align: left;">:material-check:</td>
</tr>
<tr>
<td style="text-align: left;">SLURM</td>
<td style="text-align: left;">:material-check-all:</td>
<td style="text-align: left;">:material-check:</td>
<td style="text-align: left;">:material-check:  On scratch and nfs dir</td>
</tr>
</tbody>
</table>
<h2 id="optional-configuration-of-computational-resources-used-for-pipeline-runs">Optional configuration of computational resources used for pipeline runs</h2>
<p>The toolkit uses the following machine types (flavors) for running tools. All flavors can be optionally
adjusted by modifying the cpus and memory (in GB) parameters. If for example the largest flavor is not available
in the infrastructure, <code>cpus</code> and <code>memory</code> parameters can be modified to fit the highmemMedium flavor. If larger
flavors are available, it makes especially sense to increase the <code>cpus</code> and <code>memory</code> values of the <code>large</code>
flavor to speed up for example assembly and read mapping.</p>
<p>Example Configuration:</p>
<div class="highlight"><pre><span></span><code>resources:
  highmemLarge:
    cpus: 28
    memory: 230
  highmemMedium:
    cpus: 14
    memory: 113
  large:
    cpus: 28
    memory: 58
  medium:
    cpus: 14
    memory: 29
  small:
    cpus: 7
    memory: 14
  tiny:
    cpus: 1
    memory: 1
</code></pre></div>
<p>Additional flavors can be defined that can be used by methods that dynamically compute resources on tool error (see assembly module section).</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code>resources:
  xlarge:
    cpus: 56
    memory: 512
  highmemLarge:
    cpus: 28
    memory: 230
  highmemMedium:
    cpus: 14
    memory: 113
  large:
    cpus: 28
    memory: 58
  medium:
    cpus: 14
    memory: 29
  small:
    cpus: 7
    memory: 14
  tiny:
    cpus: 1
    memory: 1
</code></pre></div>
<p>The full pipeline mode is able to predict the memory consumption of some assemblers (see assembly module section).</p>
<h2 id="fragment-recruitment-for-unmapped-reads-configuration">Fragment Recruitment for unmapped reads Configuration</h2>
<p>Reads that could not be mapped back to a MAG can be used for fragment recruitment.
A list of genomes can be provided in the fragmentRecruitment part. 
Matched reference genomes are included in all other parts of the remaining pipeline.
Look out for their specific headers to differentiate results based on real assembled genomes and the reference genomes.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.bd41221c.min.js"></script>
      
    
  </body>
</html>