<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Plasmids - Meta-Omics-Toolkit</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
        <link href="../../css/version-select.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Meta-Omics-Toolkit</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="navitem">
                                <a href="../../pipeline_configuration/" class="nav-link">Global Pipeline Configuration Settings</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Modules <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../qualityControl/" class="dropdown-item">Quality Control</a>
</li>
                                    
<li>
    <a href="../annotation/" class="dropdown-item">Annotation</a>
</li>
                                    
<li>
    <a href="../assembly/" class="dropdown-item">Assembly</a>
</li>
                                    
<li>
    <a href="../cooccurrence/" class="dropdown-item">Cooccurrence</a>
</li>
                                    
<li>
    <a href="../dereplication/" class="dropdown-item">Dereplication</a>
</li>
                                    
<li>
    <a href="../fragment_recruitment/" class="dropdown-item">Run Fragment Recruitment</a>
</li>
                                    
<li>
    <a href="../magAttributes/" class="dropdown-item">MagAttributes</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">Plasmids</a>
</li>
                                    
<li>
    <a href="../metabolomics/" class="dropdown-item">Metabolomics</a>
</li>
                                    
<li>
    <a href="../readMapping/" class="dropdown-item">Read Mapping</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Developer <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../developer_guidelines/" class="dropdown-item">Guidelines</a>
</li>
                                    
<li>
    <a href="../../pipeline_specification/" class="dropdown-item">Pipeline Specification</a>
</li>
                                    
<li>
    <a href="../../module_specification/" class="dropdown-item">Module Specification</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../magAttributes/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../metabolomics/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#plasmids" class="nav-link">Plasmids</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#input" class="nav-link">Input</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#output" class="nav-link">Output</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="plasmids">Plasmids</h1>
<p>The plasmid module is able to identify contigs as plasmids and also to assemble plasmids from the samples fastq data. The module is executed in two
parts. In the first part contigs of a metagenome assembler are scanned for plasmids. In the second part a plasmid assembler is used to assemble
circular plasmids out of raw reads. All plasmid detection tools are executed on the circular assembly result and on the contigs of the metagenome assembler.
Just the filtered sequences are used for downstream analysis. </p>
<p>The identification of plasmids is based on the combined result of tools which have a <code>filter</code> property assigned. Results of all tools that
have the <code>filter</code> property set to true are combined either by a logical <code>OR</code> or by a logical <code>AND</code>. </p>
<p>Example for the <code>OR</code> and <code>AND</code> operations: 
Let's assume that we have three plasmid detection tools (t1, t2, t3) that have four contigs (c1, c2, c3, c4) as input. Let's further assume that c1 and c2 are detected by all tools as contigs and
c3 and c4 are only detected by t1 and t2. By using an <code>AND</code> only c1 and c2 are finally reported by the module as plasmids. By using an <code>OR</code> all contigs would be annotated as plasmids. </p>
<p>It is also possible to simply run a tool without
using its result as filter by setting <code>filter</code> to <code>false</code>. If a tool should not be executed then the tool section should be removed.
Only the detected plasmids will be used for downstream analysis.</p>
<p>For running a plasmid assembly we suggest running the full pipeline mode with the enabled plasmids module. See input example configuration files.
The read mapper can either be Bowtie or Bwa for Illumina and minimap for long reads.  </p>
<h2 id="input">Input</h2>
<div class="tabbed-set tabbed-alternate" data-tabs="1:4"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Command</label><label for="__tabbed_1_2">Configuration file for full pipeline mode with plasmids detections</label><label for="__tabbed_1_3">Configuration file for plasmids module only</label><label for="__tabbed_1_4">TSV Table</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>-entry wPlasmidsPath -params-file example_params/plasmids.yml
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>
</code></pre></div>
</div>
</div>
</div>
<h3 id="databases">Databases</h3>
<p>The plasmid module needs the following compressed database file formats: </p>
<h3 id="viralverifyplasmid">ViralVerifyPlasmid</h3>
<p>ViralVerifyPlasmid needs a recent pfam-A database in .gz format.
See <a href="../../pipeline_configuration/#database-input-configuration">database section</a> for possible download strategies.
If you need credentials to access your files via S3 then please use the following command:</p>
<div class="highlight"><pre><span></span><code>nextflow secrets set S3_ViralVerifyPlasmid_ACCESS XXXXXXX
nextflow secrets set S3_ViralVerifyPlasmid_SECRET XXXXXXX
</code></pre></div>
<h3 id="mobtyper">MobTyper</h3>
<p>Database was generated by gzipping the output of mob_init.
See <a href="../../pipeline_configuration/#database-input-configuration">database section</a> for possible download strategies.
If you need credentials to access your files via S3 then please use the following command:</p>
<div class="highlight"><pre><span></span><code>nextflow secrets set S3_MobTyper_ACCESS XXXXXXX
nextflow secrets set S3_MobTyper_SECRET XXXXXXX
</code></pre></div>
<h3 id="platon">Platon</h3>
<p>The tar gzipped database for running platon can be fetched from the <a href="https://github.com/oschwengers/platon">Platon</a> github page.
See <a href="../../pipeline_configuration/#database-input-configuration">database section</a> for possible download strategies.
If you need credentials to access your files via S3 then please use the following command:</p>
<div class="highlight"><pre><span></span><code>nextflow secrets set S3_Platon_ACCESS XXXXXXX
nextflow secrets set S3_Platon_SECRET XXXXXXX
</code></pre></div>
<h4 id="plsdb">PLSDB</h4>
<p>PLSDB Database is available via this link: <a href="https://ccb-microbe.cs.uni-saarland.de/plsdb/plasmids/download/plasmids_meta.tar.bz2">https://ccb-microbe.cs.uni-saarland.de/plsdb/plasmids/download/plasmids_meta.tar.bz2</a>.
All files except <em>.tsv and </em>.msh were deleted from the compressed package.
See <a href="../../pipeline_configuration/#database-input-configuration">database section</a> for possible download strategies.
The compressed database must be a tar.bz2 file. 
If you need credentials to access your files via S3 then please use the following command:</p>
<div class="highlight"><pre><span></span><code>nextflow secrets set S3_PLSDB_ACCESS XXXXXXX
nextflow secrets set S3_PLSDB_SECRET XXXXXXX
</code></pre></div>
<h2 id="output">Output</h2>
<h3 id="scapp">SCAPP</h3>
<p>SCAPP detects plasmid sequences out of the samples assembly graph.
It reports sequences as gzipped fasta files (<code>*_plasmids.fasta.gz</code>). A basic statistic (<code>*_plasmids_stats.tsv</code>) per plasmid and a summary statistic (<code>*_plasmids_summary_stats.tsv</code>) over all
plasmids is also generated. Coverm coverage metrics are generated for all plasmids. Gene coverage values are generated as part of the annotation module output.</p>
<h3 id="plasclass">PlasClass</h3>
<p>PlasClass is able to identify plasmids by using a statistical model that was build using kmer frequencies.
It reports gzipped fata files and their probabilities (<code>*_plasclass.tsv</code>).</p>
<h3 id="mobtyper-and-platon">MobTyper and Platon</h3>
<p>MobTyper and Platon are using both replicon typing for plasmid detection. (<code>*_mobtyper_results.tsv</code>, <code>*_platon.tsv</code>)</p>
<h3 id="viralverifyplasmid_1">ViralVerifyPlasmid</h3>
<p>ViralVerfiy is applying a Naive Bayes classifier (<code>*_viralverifyplasmid.tsv</code>).</p>
<h3 id="plsdb_1">PLSDB</h3>
<p>PLSDB includes a curated set of plasmid sequences that were extracted from databases like refseq.
The metadata of found sequences are reported in <code>*.tsv</code> and the metadata of the filtered sequences in <code>*_kmerThreshold_X.tsv</code>.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/jquery-3.6.0.min.js"></script>
        <script src="../../js/bootstrap.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>
        <script src="../../js/version-select.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
